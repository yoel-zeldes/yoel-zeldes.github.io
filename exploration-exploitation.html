<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>Recommender Systems: Exploring the Unknown Using Uncertainty</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
<link href="https://anotherdatum.com/exploration-exploitation.html" rel="canonical" />
  <!-- Feed -->
        <link href="https://anotherdatum.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Another Datum Full Atom Feed" />

  <link href="https://anotherdatum.com/theme/css/style.css" type="text/css" rel="stylesheet" />

  <!-- Code highlight color scheme -->
      <link href="https://anotherdatum.com/theme/css/code_blocks/tomorrow.css" rel="stylesheet">

    <!-- CSS specified by the user -->


    <link href="https://anotherdatum.com/css/overrides.css" type="text/css" rel="stylesheet" />

  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->



    <meta name="description" content="Learn what the exploration-exploitation tradeoff is, and how to use your model's uncertainty to explore new items in a wise manner.">

    <meta name="author" content="Yoel Zeldes">

    <meta name="tags" content="deep learning">
    <meta name="tags" content="uncertainty">
    <meta name="tags" content="recommender systems">




<!-- Open Graph -->
<meta property="og:site_name" content="Another Datum"/>
<meta property="og:title" content="Recommender Systems: Exploring the Unknown Using Uncertainty"/>
<meta property="og:description" content="Learn what the exploration-exploitation tradeoff is, and how to use your model's uncertainty to explore new items in a wise manner."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://anotherdatum.com/exploration-exploitation.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2018-08-14 21:00:00+03:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://anotherdatum.com/author/yoel-zeldes.html">
  <meta property="article:publisher" content="https://www.facebook.com/yoel.zeldes" />
<meta property="article:section" content="exploration"/>
<meta property="article:tag" content="deep learning"/>
<meta property="article:tag" content="uncertainty"/>
<meta property="article:tag" content="recommender systems"/>
<meta property="og:image" content="https://anotherdatum.com/images/uncertainty_paper/exploration/cover.jpg">

<!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@YZeldes">
    <meta name="twitter:title" content="Recommender Systems: Exploring the Unknown Using Uncertainty">
    <meta name="twitter:url" content="https://anotherdatum.com/exploration-exploitation.html">

        <meta name="twitter:image:src" content="https://anotherdatum.com/images/uncertainty_paper/exploration/cover.jpg">

      <meta name="twitter:description" content="Learn what the exploration-exploitation tradeoff is, and how to use your model's uncertainty to explore new items in a wise manner.">

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Recommender Systems: Exploring the Unknown Using Uncertainty",
  "headline": "Recommender Systems: Exploring the Unknown Using Uncertainty",
  "datePublished": "2018-08-14 21:00:00+03:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Yoel Zeldes",
    "url": "https://anotherdatum.com/author/yoel-zeldes.html"
  },
  "image": "https://anotherdatum.com/images/uncertainty_paper/exploration/cover.jpg",
  "url": "https://anotherdatum.com/exploration-exploitation.html",
  "description": "Learn what the exploration-exploitation tradeoff is, and how to use your model's uncertainty to explore new items in a wise manner."
}
</script>
</head>
<!-- TODO : Body class -->
<body class="home-template">

<nav id="menu">
  <a class="close-button">Close</a>
  <div class="nav-wrapper">
    <p class="nav-label">Menu</p>
    <ul>
          <li><a href="https://anotherdatum.com" role="presentation">Posts</a></li>

              <li role="presentation"><a href="https://anotherdatum.com/pages/about.html">about me</a></li>
              <li role="presentation"><a href="https://anotherdatum.com/pages/resources.html">Resources</a></li>

    </ul>
  </div>
</nav>
    <!-- Progressbar -->
    <div class="progress-container">
        <span class="progress-bar"></span>
    </div>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header id="post-header" class="has-cover">
      <div class="inner">
        <nav id="navigation">
            <span id="home-button" class="nav-button">
                <a class="home-button" href="https://anotherdatum.com/" title="Home"><i class="ic ic-arrow-left"></i> Home</a>
            </span>
          <span id="menu-button" class="nav-button">
            <a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
          </span>
        </nav>
        <h1 class="post-title">Recommender Systems: Exploring the Unknown Using Uncertainty</h1>
        <!-- TODO : Proper class for headline -->
        <span class="post-meta">
            <time datetime="14 August 2018">14 August 2018</time>
        </span>
        <!-- TODO : Modified check -->
            <div class="post-cover cover" style="background-image: url('https://anotherdatum.com/images/uncertainty_paper/exploration/cover.jpg')">
      </div>
    </header>

  <section id="wrapper">
    <a class="hidden-close"></a>

    <!-- Post content -->
    <main class="content" role="main">
        <article class="post">
        <div class="inner">
            <section class="post-content">
                <p><em>This is a joint post with <a href="https://medium.com/@inbarnaor">Inbar Naor</a>. Originally published at <a href="https://engineering.taboola.com/recommender-systems-exploring-the-unknown-using-uncertainty">engineering.taboola.com</a>.</em></p>
<hr>
<p>Now that we know <a href="https://engineering.taboola.com/using-uncertainty-interpret-model">what uncertainty
types</a> exist
and <a href="https://engineering.taboola.com/neural-networks-bayesian-perspective">learned some ways to model
them</a>, we
can start talking about how to use them in our application.</p>
<p>In this post we‚Äôll introduce the exploration-exploitation problem and show you
how uncertainty can help in solving it. We‚Äôll focus on exploration in
recommender systems, but the same idea can be applied in many applications of
reinforcement learning ‚Äî self driving cars, robots, etc.</p>
<h1>Problem Setting</h1>
<p>The goal of a recommender system is to recommend items that the users might find
relevant. At Taboola, relevance is expressed via a click: we show a widget
containing content recommendations, and the users choose if they want to click
on one of the items.</p>
<p>The probability of the user clicking on an item is called <em>Click Through Rate</em>
(CTR). If we knew the CTR of all the items, the problem of which items to
recommend would be easy: simply recommend the items with the highest CTR.</p>
<p>The problem is that we don‚Äôt know what the CTR is. We have a model that
estimates it, but it‚Äôs obviously not perfect. Some of the reasons for the
imperfection are the uncertainty types inherent in recommender systems, which we
discussed in <a href="https://engineering.taboola.com/using-uncertainty-interpret-model">the first post of the
series</a>.</p>
<h1>The Exploitation vs Exploration Tradeoff</h1>
<p><img alt="" src="images/uncertainty_paper/exploration/icecream.jpg"></p>
<p>So now we‚Äôre facing a challenging situation ‚Äî one that we‚Äôre all familiar with
from our day-to-day lives: imagine you‚Äôve just entered an ice cream shop. You
now face a crucial decision ‚Äî out of about 30 flavors you need to choose only
one!</p>
<p>You can go with two strategies: either go with that favorite flavor of yours
that you already know is the best; or explore new flavors you never tried
before, and maybe find a new best flavor.</p>
<p>These two strategies ‚Äî exploitation and exploration ‚Äî can also be used when
recommending content. We can either exploit items that have high CTR with high
certainty ‚Äî maybe because these items have been shown thousands of times to
similar users; or we can explore new items we haven‚Äôt shown to many users in the
past. Incorporating exploration into your recommendation strategy is crucial ‚Äî
without it new items don‚Äôt stand a chance against older, more familiar ones.</p>
<h1>Let‚Äôs explore exploration approaches</h1>
<p>The easiest exploration-exploitation approach you can implement is the œµ-greedy
algorithm, where you allocate œµ percents of the traffic to explore new items in
a random manner. The rest of the traffic is reserved for exploitation.</p>
<p>Despite not being optimal, this method is easy to understand. It can serve as a
solid baseline for more sophisticated approaches. So how can we look for good
items in a wiser manner?</p>
<p><img alt="" src="images/uncertainty_paper/exploration/wise.jpg">
<em>looking for good items in a wise manner</em></p>
<p>A more advanced approach ‚Äî <em>Upper Confidence Bound</em> (UCB) ‚Äî uses uncertainty.
Each item is associated with its expected CTR, and confidence bound over that
CTR. The confidence bound captures how uncertain we are about the item‚Äôs CTR.
The vanilla UCB algorithm keeps track of the expected CTR and confidence bound
by using empirical information alone: for each item we keep track of the
empirical CTR (what percent of similar users have clicked on it), and the
confidence bound is calculated by assuming a binomial distribution.</p>
<p>Take for example the plain chocolate flavor you always order. You know it‚Äôs good
‚Äî you give it 8 stars out of 10. Today a new flavor has arrived. You have no
empiric information about it, which means it can be anything from 1 to 10 stars.
Using this confidence interval, if you would want to explore you‚Äôd go with the
new flavor, since there‚Äôs the chance it‚Äôll be a 10 stars flavor.</p>
<p>That strategy is exactly what UCB is all about ‚Äî you choose the item with the
highest upper confidence bound value ‚Äî in our case confidence bound over CTR
estimation. The motivation behind this strategy is that over time the empiric
CTR will tend towards the true CTR, and the confidence bound will shrink to 0.
After enough time, we‚Äôll explore everything.</p>
<p>Another popular approach is the <em>Thompson Sampling</em> method. In this approach we
use the entire estimated distribution over the item‚Äôs CTR instead of only a
confidence bound. For each item we sample a CTR out of its distribution.</p>
<p>These approaches might work well when the number of available items is fixed.
Unfortunately, at Taboola every day thousands of new items enter the system, and
others become obsolete. By the time we get a reasonable confidence bound for an
item it might leave the system. Our efforts would have been in vain. It‚Äôs like
doing a world tour, each day visiting a new town with a vast amount of ice cream
flavors to explore. The horror!</p>
<p>We need an approach that can estimate the CTR of a new item without showing it
even once. We need some food critic magazine that will guide us through the
buffet of content recommendations.</p>
<p>Consider a new type of chocolate flavor that just arrived. Since you know you
love chocolate you have a pretty good guess that you‚Äôll like the new flavor too.
In the vanilla UCB approach (no, that‚Äôs not a name of a flavor), you won‚Äôt be
able to infer it ‚Äî you rely on empirical information only.</p>
<p>In a future post we‚Äôll elaborate on how we use a neural network to estimate the
CTR of a new item, as well as the level of uncertainty. Using this uncertainty,
we can apply the UCB approach in order to explore new items. Unlike the vanilla
UCB that relies on empirical data, here we can use the model‚Äôs estimation to
avoid showing items with low CTR. We can gamble on the horses we think will
win.</p>
<p>üêé</p>
<h1>Online metrics and results</h1>
<p>How can we know how well we explore new items? We need some exploration
throughput metric. In Taboola we have A/B testing infrastructure supporting many
models running on different shares of traffic.</p>
<p>Back to ice cream! Let‚Äôs say you brought your friends to help you explore the
different flavors. Obviously if one of your friends randomly picks flavors, he
has the best exploration throughput, but not the smartest. The other friend that
orders the flavor the others have found tasty enjoys the most, but contributes
nothing to the exploration effort.</p>
<p>At Taboola we measure exploration throughput as follows: for each item that has
been shown enough times, and in enough different contexts (e.g ‚Äî different web
sites) we declare that item to have crossed the exploration phase. Next, we
analyze which models contributed to this successful effort. In order to count, a
model has to show that item enough times.</p>
<p>Using this perspective, the throughput of a model is defined to be the number of
items it contributed to.</p>
<p><img alt="" src="images/uncertainty_paper/exploration/tradeoff.png"></p>
<p>Using this metric, we were able to assert that indeed showing items randomly
yields the best throughput, but with a tendency for bad items. A model that
doesn‚Äôt use the UCB approach shows good items, but has worse throughput. The
model with UCB is somewhere between in terms of throughput, and shows only
slightly worse items compared to the non-UCB model.</p>
<p>Hence, we conclude our UCB model has a good tradeoff between exploring new
items, and choosing the good items. We believe this tradeoff is worthwhile in
the long term.</p>
<h1>Final thoughts</h1>
<p>The exploration-exploitation problem is an exciting challenge for many companies
in the recommender systems domain. We hope our advancements will serve others in
their journey of providing the best service to their users. We believe this is a
small step in a big journey yet to be fulfilled, and we‚Äôre intrigued by the
thought of what shape this field will take in the following years.</p>
<p>In the next post of the series we‚Äôll elaborate on the model we used for
estimating CTR and uncertainty, so stay tuned.</p>
<hr>
<p><em>This is the third post of a series related to a paper we‚Äôre presenting in a
workshop in this year KDD conference: <a href="https://arxiv.org/abs/1711.02487">deep density networks and uncertainty in
recommender systems</a>.</em></p>
<p><em>The first post can be found
<a href="https://engineering.taboola.com/using-uncertainty-interpret-model">here</a>.</em></p>
<p><em>The second post can be found
<a href="https://engineering.taboola.com/neural-networks-bayesian-perspective">here</a>.</em></p>
            </section>

            <section class="post-info">
                <div class="post-share">
                    <a class="twitter" href="https://twitter.com/share?text=Recommender Systems: Exploring the Unknown Using Uncertainty&amp;url=https://anotherdatum.com/exploration-exploitation.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
                    </a>
                    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://anotherdatum.com/exploration-exploitation.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <i class="ic ic-facebook"></i><span class="hidden">Facebook</span>
                    </a>
                    <div class="clear"></div>
                </div>

                <aside class="post-tags">
<a href="https://anotherdatum.com/tag/deep-learning.html">deep learning</a><a href="https://anotherdatum.com/tag/uncertainty.html">uncertainty</a><a href="https://anotherdatum.com/tag/recommender-systems.html">recommender systems</a>                </aside>

                <div class="clear"></div>


                </section>

<!-- Begin MailChimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif;  width:300px;}
	#mc_embed_signup form{padding: 0;}
	/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://anotherdatum.us14.list-manage.com/subscribe/post?u=6894d7badcfb253606fa3fb54&amp;id=c6f34ad6b7" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	<h2>Get updated of new posts</h2>
<div class="mc-field-group">
	<label for="mce-EMAIL">Email Address </label>
	<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
</div>
	<div id="mce-responses" class="clear">
		<div class="response" id="mce-error-response" style="display:none"></div>
		<div class="response" id="mce-success-response" style="display:none"></div>
	</div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_6894d7badcfb253606fa3fb54_c6f34ad6b7" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>
<script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
<!--End mc_embed_signup-->
<hr />
                <div class="comments">
                    <h2>Comments !</h2>
                    <div id="disqus_thread"></div>
                    <script type="text/javascript">
                        var disqus_shortname = 'anotherdatum';
                        var disqus_identifier = 'exploration-exploitation.html';
                        var disqus_url = 'https://anotherdatum.com/exploration-exploitation.html';
                        (function() {
                            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                            dsq.src = '//anotherdatum.disqus.com/embed.js';
                            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                        })();
                    </script>
                    <noscript>Please enable JavaScript to view the comments.</noscript>
                </div>

                <aside class="post-nav">
                    <div class="clear"></div>
                </aside>

            </div>
        </article>
    </main>
      <!-- TODO : Body class -->
    <div id="body-class" style="display: none;" class=""></div>

    <footer id="footer">
            <div class="social">
                <a href="https://il.linkedin.com/in/yoelzeldes">
                    <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                    </span>
                </a>
                <a href="https://github.com/yoel-zeldes">
                    <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                    </span>
                </a>
                <a href="https://www.facebook.com/yoel.zeldes">
                    <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                    </span>
                </a>
                <a href="https://twitter.com/YZeldes">
                    <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                    </span>
                </a>
            </div>

      <div class="inner">
        <section class="credits">
          <span class="credits-theme">Have a look at <a href="https://github.com/yoel-zeldes/yoel-zeldes.github.io/tree/source">the source code</a> of this blog.</span>
        </section>
      </div>
    </footer>
  </section>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script type="text/javascript" src="https://anotherdatum.com/theme/js/script.js"></script>

    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-83684090-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-83684090-1', { 'anonymize_ip': true });
    </script>
<script type="text/javascript">
    var disqus_shortname = 'anotherdatum';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>